"use strict";const H=require("@codemirror/state"),t=require("@lezer/highlight"),m=require("markedit-api"),R=require("@codemirror/view"),T=require("@codemirror/language"),c={selectionBackground:".cm-selectionBackground",lineGutter:".cm-lineNumbers > .cm-activeLineGutter",foldGutter:".cm-foldGutter, .cm-foldPlaceholder",visibleSpace:".cm-visibleSpace, .cm-visibleSpace::before, .cm-visibleLineBreak, .cm-visibleLineBreak::before",matchingBracket:".cm-matchingBracket",activeIndicator:".cm-md-activeIndicator",emphasisElement:".cm-md-bold:not(.tok-meta), .cm-md-italic:not(.tok-meta), .cm-md-quote:not(.cm-md-quoteMark)",accentColor:".cm-md-header:not(.tok-meta):not(.cm-md-quote), .cm-md-codeInfo",syntaxMarker:".cm-md-header.tok-meta:not(.cm-md-quote), .cm-md-codeMark, .cm-md-linkMark, .cm-md-listMark, .cm-md-quoteMark"},G=`
.cm-activeLineGutter { background: inherit !important }
.cm-searchMatch.cm-searchMatch-selected { outline: inherit !important }
${c.lineGutter} {}
${c.foldGutter} {}
${c.visibleSpace} {}
${c.matchingBracket} {}
${c.activeIndicator} {}
${c.emphasisElement} {}
${c.accentColor} {}
${c.syntaxMarker} {}
`,w=window,I=w.__extractStyleRules__??(r=>r.value?.rules),j=w.__extractHighlightSpecs__??(r=>r.value?.specs);function P(r){const o=document.createElement("style");return o.textContent=r,document.head.appendChild(o),o}function F(r){if(r===void 0)return[{},[]];const o=V(r);return[Object.fromEntries(o.flatMap(n=>{const a=I(n)?.join(`
`)??"";return Object.entries(z(a))})),o.flatMap(n=>j(n)??[])]}function D(r,o){return r.some(e=>e.tag.toString().includes(o.toString())?e.color!==void 0:!1)}function S(r,o){for(const[e,n]of Object.entries(r))if(e.includes(o)){const a=n.background??n.backgroundColor;if(a!==void 0)return a}}function A(r){const o=r.match(/rgba?\((\d+), (\d+), (\d+)(?:, ([\d.]+))?\)/);if(o===null)return;const[e,n,a]=o.slice(1,4).map(Number);return`rgba(${e}, ${n}, ${a}, 0.6)`}function V(r){const o=[],e=[r];for(;e.length>0;){const n=e.pop();Array.isArray(n)?n.forEach(a=>e.push(a)):"extension"in n?e.push(n.extension):o.push(n)}return o}function z(r){const o={},e=new CSSStyleSheet;e.replaceSync(r);for(const n of e.cssRules){const{style:a,selectorText:i}=n,{background:g,backgroundColor:d}=a;o[i]={},g.length>0&&(o[i].background=g),d.length>0&&(o[i].backgroundColor=d)}return o}function U(r){r.light!==void 0&&(s().customThemes.light=r.light),r.dark!==void 0&&(s().customThemes.dark=r.dark),typeof m.MarkEdit.editorView=="object"&&x(m.MarkEdit.editorView)}const k=window,s=()=>k.__markeditTheming__,N=matchMedia("(prefers-color-scheme: dark)");typeof s()!="object"&&J();function J(){k.__markeditTheming__={styleSheet:P(G),configurator:new H.Compartment,customThemes:{},lightOriginalRules:{},darkOriginalRules:{}},m.MarkEdit.addExtension(s().configurator.of([])),m.MarkEdit.onEditorReady(o=>x(o));const r=()=>setTimeout(()=>x(m.MarkEdit.editorView),15);N.addEventListener("change",r),s().mainThemeName=k.config.theme,Object.defineProperty(k.config,"theme",{get(){return s().mainThemeName},set(o){s().mainThemeName=o,r()}})}function x(r){const o=N.matches,e=o?s().customThemes.dark:s().customThemes.light;r.dispatch({effects:s().configurator.reconfigure(e?.extension??[])});const[n,a]=F(e?.extension),i=e===void 0;s().styleSheet.disabled=i,K(r,o,i,n,a,e?.colors)}function K(r,o,e,n,a,i){const g=S(n,".cm-activeLine"),d=S(n,c.selectionBackground),b=S(n,c.matchingBracket),f=getComputedStyle(r.contentDOM).color,C=i?.visibleSpace??A(f),_=D(a,t.tags.heading),L=[[c.activeIndicator,g,"background"],[c.matchingBracket,b,"background"],[c.lineGutter,f,"color"],[c.foldGutter,C,"color"],[c.visibleSpace,C,"color"],[c.accentColor,i?.accentColor,"color"],[c.syntaxMarker,i?.syntaxMarker,"color"]],$=Array.from(document.querySelectorAll("style")),h=o?s().darkOriginalRules:s().lightOriginalRules;for(const q of $){const y=q.sheet?.cssRules;if(y!==void 0)for(let v=0;v<y.length;++v){const l=y[v],u=l.selectorText??"";u.includes(".cm-focused")&&u.includes(c.selectionBackground)&&(h.selectionBackground??=l.cssText,e?l.cssText=h.selectionBackground:d!==void 0&&l.style.setProperty("background",d,"important")),_&&(u===".cm-md-header"||u===".cm-md-header:not(.cm-md-quote)")&&(h.markdownHeader??=l.cssText,e?l.cssText=h.markdownHeader:l.style.removeProperty("color"));for(const[O,B,M]of L)u===O&&(B===void 0?l.style.removeProperty(M):(l.style.setProperty(M,B,"important"),(u===c.matchingBracket||u===c.activeIndicator)&&l.style.setProperty("box-shadow","unset","important")));u===c.emphasisElement&&(i?.subtleEmphasis??!0?l.style.setProperty("color","inherit","important"):l.style.removeProperty("color"))}}}function p(){return p=Object.assign?Object.assign.bind():function(r){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var n in e)({}).hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},p.apply(null,arguments)}var E=r=>{var{theme:o,settings:e={},styles:n=[]}=r,a={".cm-gutters":{}},i={};e.background&&(i.backgroundColor=e.background),e.backgroundImage&&(i.backgroundImage=e.backgroundImage),e.foreground&&(i.color=e.foreground),e.fontSize&&(i.fontSize=e.fontSize),(e.background||e.foreground)&&(a["&"]=i),e.fontFamily&&(a["&.cm-editor .cm-scroller"]={fontFamily:e.fontFamily}),e.gutterBackground&&(a[".cm-gutters"].backgroundColor=e.gutterBackground),e.gutterForeground&&(a[".cm-gutters"].color=e.gutterForeground),e.gutterBorder&&(a[".cm-gutters"].borderRightColor=e.gutterBorder),e.caret&&(a[".cm-content"]={caretColor:e.caret},a[".cm-cursor, .cm-dropCursor"]={borderLeftColor:e.caret});var g={};e.gutterActiveForeground&&(g.color=e.gutterActiveForeground),e.lineHighlight&&(a[".cm-activeLine"]={backgroundColor:e.lineHighlight},g.backgroundColor=e.lineHighlight),a[".cm-activeLineGutter"]=g,e.selection&&(a["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:e.selection+" !important"}),e.selectionMatch&&(a["& .cm-selectionMatch"]={backgroundColor:e.selectionMatch});var d=R.EditorView.theme(a,{dark:o==="dark"}),b=T.HighlightStyle.define(n),f=[d,T.syntaxHighlighting(b)];return f},Q={background:"#faf8f5",foreground:"#b29762",caret:"#93abdc",selection:"#e3dcce",selectionMatch:"#e3dcce",gutterBackground:"#faf8f5",gutterForeground:"#cdc4b1",gutterBorder:"transparent",lineHighlight:"#ddceb154"},W=[{tag:[t.tags.comment,t.tags.bracket],color:"#b6ad9a"},{tag:[t.tags.atom,t.tags.number,t.tags.keyword,t.tags.link,t.tags.attributeName,t.tags.quote],color:"#063289"},{tag:[t.tags.emphasis,t.tags.heading,t.tags.tagName,t.tags.propertyName,t.tags.variableName],color:"#2d2006"},{tag:[t.tags.typeName,t.tags.url,t.tags.string],color:"#896724"},{tag:[t.tags.operator,t.tags.string],color:"#1659df"},{tag:[t.tags.propertyName],color:"#b29762"},{tag:[t.tags.unit,t.tags.punctuation],color:"#063289"}],X=r=>{var{theme:o="light",settings:e={},styles:n=[]}={};return E({theme:o,settings:p({},Q,e),styles:[...W,...n]})},Y=X(),Z={background:"#2a2734",foreground:"#6c6783",caret:"#ffad5c",selection:"#91ff6c26",selectionMatch:"#91ff6c26",gutterBackground:"#2a2734",gutterForeground:"#545167",lineHighlight:"#36334280"},ee=[{tag:[t.tags.comment,t.tags.bracket],color:"#6c6783"},{tag:[t.tags.atom,t.tags.number,t.tags.keyword,t.tags.link,t.tags.attributeName,t.tags.quote],color:"#ffcc99"},{tag:[t.tags.emphasis,t.tags.heading,t.tags.tagName,t.tags.propertyName,t.tags.className,t.tags.variableName],color:"#eeebff"},{tag:[t.tags.typeName,t.tags.url],color:"#7a63ee"},{tag:t.tags.operator,color:"#ffad5c"},{tag:t.tags.string,color:"#ffb870"},{tag:[t.tags.propertyName],color:"#9a86fd"},{tag:[t.tags.unit,t.tags.punctuation],color:"#e09142"}],te=r=>{var{theme:o="dark",settings:e={},styles:n=[]}={};return E({theme:o,settings:p({},Z,e),styles:[...ee,...n]})},oe=te();U({light:{extension:Y},dark:{extension:oe}});
